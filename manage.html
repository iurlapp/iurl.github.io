<!DOCTYPE html>
<html lang="en">
<head>
<meta charset='utf-8'>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no">

<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

<title>iURL - Manage</title>

<script src="head.js"></script>
<link href="https://fonts.googleapis.com/css?family=Poppins:700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="index.css">

</head>
<body>

<main class="main">
<form class="form" action="javascript:void(0);">
<input type="text" maxlength="20" id="key" placeholder="alias" label="alias" autocomplete="off" required>
<button id="dbtn" type="submit" aria-label="Shorten">
<span id="status">delete</span>
</button>
</form>
<div id="erbox"></div>
<div class="form" id="output" style="display: none">
<div id="alias"></div>
<input type="text" id="shortenedURL" placeholder="Output" label="short url">
<div id="sucess"></div>
</div>
<div class="flex"></div>
<footer>
<a href="index.html">
<img src="home.svg" style="height: 24px; margin-right: 8px;">Home
</a>
<div class="flex"></div>
<p style="height: 24px; margin-left:18px; margin-right: 13px; color:#bbb;">iURL &copy; 2020</p>
</footer>
</main>

<script src="manage.js"></script>

<script>
let pwaInstalled = localStorage.getItem('pwaInstalled') == 'yes'
if (window.matchMedia('(display-mode: standalone)').matches) {
localStorage.setItem('pwaInstalled', 'yes')
pwaInstalled = true
}
if (window.navigator.standalone === true) {
localStorage.setItem('pwaInstalled', 'yes')
pwaInstalled = true
}
if (pwaInstalled) {
document.getElementById('installPWA').style.display = 'none'
} else {
document.getElementById('installPWA').style.display = 'block'
}
let deferredPrompt = null
window.addEventListener('beforeinstallprompt', (e) => {
deferredPrompt = e
})
async function installPWA() {
if (deferredPrompt) {
deferredPrompt.prompt()
deferredPrompt.userChoice.then(({
outcome
}) => {
if (outcome === 'accepted') {
console.log('Your PWA has been installed')
} else {
console.log('User chose to not install your PWA')
}
deferredPrompt = null
})
}
}
window.addEventListener('appinstalled', (evt) => {
localStorage.setItem('pwaInstalled', 'yes')
pwaInstalled = true
document.getElementById('installPWA').style.display = 'none'
})
</script>

</body>
</html>